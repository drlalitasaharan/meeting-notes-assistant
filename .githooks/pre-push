#!/usr/bin/env bash
set -euo pipefail
branch="$(git rev-parse --abbrev-ref HEAD)"
if [[ "$branch" == "main" && "${ALLOW_MAIN_PUSH:-0}" != "1" ]]; then
  echo "‚ùå Blocking push to 'main'. Use a feature branch + PR."
  echo "   (Override once with: ALLOW_MAIN_PUSH=1 git push  or: git push --no-verify)"
  exit 1
fi
